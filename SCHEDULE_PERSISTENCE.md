# ูุธุงู ุงูุชุฎุฒูู ุงูุฏุงุฆู ููุฌุฏููุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุชุฎุฒูู ุฏุงุฆู ููุฌุฏููุฉ ูุญู ูุดููุฉ ููุฏุงู ุงูุฌุฏููุฉ ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช.

---

## โจ ุงูููุฒุงุช

### 1. **ุงูุชุฎุฒูู ุงูุชููุงุฆู**
- ุนูุฏ ุงุณุชุฎุฏุงู `/schedule`ุ ูุชู ุญูุธ ุงูุจูุงูุงุช ูู `schedule.json`
- ุงูููู ููุญูุธ ุชููุงุฆูุงู ูู ูุฌูุฏ ุงููุดุฑูุน

### 2. **ุงูุงุณุชุฑุฌุงุน ุงูุชููุงุฆู**
- ุนูุฏ ุจุฏุก ุงูุจูุชุ ููุฑุฃ `schedule.json` ุชููุงุฆูุงู
- ูุญุณุจ ุงูููุช ุงููุชุจูู ููุถุจุท `setTimeout` ูู ุฌุฏูุฏ
- ุฅุฐุง ุงูุชูู ุงูููุชุ ูุญุฐู ุงูููู ุชููุงุฆูุงู

### 3. **ุงูุชุญุฏูุซ ุงูุฐูู**
- ุงุณุชุฎุฏุงู `/schedule` ูุฑุฉ ุฃุฎุฑู ูุณุชุจุฏู ุงูุฌุฏููุฉ ุงููุฏููุฉ
- ุงุณุชุฎุฏุงู `/cancelschedule` ูุญุฐู ุงูููู
- ุจุนุฏ ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงููุฌุฏููุฉุ ููุญุฐู ุงูููู ุชููุงุฆูุงู

---

## ๐ง ููู ูุนูู

### ุนูุฏ ุงูุฌุฏููุฉ (`/schedule`):
```javascript
1. ูุญูุธ ุงูุจูุงูุงุช ูู this.scheduledData
2. ููุชุจ ุงูููู schedule.json
3. ูุถุจุท setTimeout
```

### ุนูุฏ ุจุฏุก ุงูุจูุช:
```javascript
1. ููุฑุฃ schedule.json
2. ูุญุณุจ ุงูููุช ุงููุชุจูู
3. ุฅุฐุง ุงูููุช ูู ููุชูู โ ูุถุจุท setTimeout
4. ุฅุฐุง ุงูููุช ุงูุชูู โ ูุญุฐู ุงูููู
```

### ุนูุฏ ุงูุฅุฑุณุงู:
```javascript
1. ูุฑุณู ุงูุฑุณุงูุฉ
2. ูุญุฐู schedule.json
3. ููุธู this.scheduledData
```

---

## ๐ ุดูู ุงูููู

**`schedule.json`:**
```json
{
  "datetime": "2024-12-08 18:00",
  "channelId": "1234567890",
  "timestamp": 1733659200000
}
```

---

## ๐ฏ ุงูุณููุงุฑูููุงุช

### ุงูุณููุงุฑูู 1: ุฌุฏููุฉ ุนุงุฏูุฉ
```
ุงููุณุชุฎุฏู: /schedule datetime:2024-12-08 18:00 channel:#swap
ุงูุจูุช: โ ูุญูุธ ูู schedule.json
ุงูุจูุช: โ ูุถุจุท setTimeout ูู 6 ุณุงุนุงุช
ุงูุจูุช: โฐ Schedule set: Will post in 360 minutes
```

### ุงูุณููุงุฑูู 2: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช
```
Railway: ๐ Restarting bot...
ุงูุจูุช: ๐ Starting...
ุงูุจูุช: ๐ ููุฑุฃ schedule.json
ุงูุจูุช: โ Restored schedule: Will post in 180 minutes
```

### ุงูุณููุงุฑูู 3: ุชุนุฏูู ุงูุฌุฏููุฉ
```
ุงููุณุชุฎุฏู: /schedule datetime:2024-12-08 20:00 channel:#swap
ุงูุจูุช: โ๏ธ ููุบู ุงูุฌุฏููุฉ ุงููุฏููุฉ
ุงูุจูุช: โ ูุญุฐู schedule.json ุงููุฏูู
ุงูุจูุช: โ ููุชุจ schedule.json ุฌุฏูุฏ
```

### ุงูุณููุงุฑูู 4: ุฅูุบุงุก ุงูุฌุฏููุฉ
```
ุงููุณุชุฎุฏู: /cancelschedule
ุงูุจูุช: โ ููุบู setTimeout
ุงูุจูุช: ๐๏ธ ูุญุฐู schedule.json
```

---

## ๐ Logs ุงููุชููุนุฉ

### ุนูุฏ ุงูุฌุฏููุฉ:
```
๐พ Saved schedule to file
โฐ Schedule set: Will post in 360 minutes (2024-12-08 18:00 UTC)
```

### ุนูุฏ ุจุฏุก ุงูุจูุช (ูุน ุฌุฏููุฉ ูุญููุธุฉ):
```
โ Restored schedule: Will post in 180 minutes (2024-12-08 18:00 UTC)
```

### ุนูุฏ ุจุฏุก ุงูุจูุช (ุจุฏูู ุฌุฏููุฉ):
```
โน๏ธ No saved schedule found
```

### ุนูุฏ ุงูุฅุฑุณุงู:
```
๐ Refreshing data from Google Sheets before scheduled post...
โ Data refreshed: 150 players
โ Scheduled post sent to swap
๐๏ธ Deleted schedule file
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. **ุงูููู ูู .gitignore**
- `schedule.json` ูุถุงู ุฅูู `.gitignore`
- ูู ููุฑูุน ุฅูู GitHub

### 2. **ุงูุชูุธูู ุงูุชููุงุฆู**
- ุงูููู ููุญุฐู ุชููุงุฆูุงู ุจุนุฏ:
  - ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุงููุฌุฏููุฉ
  - ุฅูุบุงุก ุงูุฌุฏููุฉ
  - ุงูุชูุงุก ุงูููุช ุงููุญุฏุฏ

### 3. **ุงูุชูููุช**
- ุฌููุน ุงูุฃููุงุช ุจุชูููุช UTC
- ุชุฃูุฏ ูู ุญุณุงุจ ูุฑู ุงูุชูููุช

### 4. **ุญุฏ setTimeout**
- `setTimeout` ูู ุญุฏ ุฃูุตู: ~24.8 ููู
- ููุฌุฏููุฉ ุงูุฃุทููุ ุงุณุชุฎุฏู ููุชุจุฉ `node-cron`

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุฌุฏููุฉ ูุตูุฑุฉ
```
/schedule datetime:2024-12-08 12:35 channel:#test
ุงูุชุธุฑ 5 ุฏูุงุฆู
ุชุญูู ูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ
```

### ุงุฎุชุจุงุฑ 2: ุฅุนุงุฏุฉ ุงูุชุดุบูู
```
/schedule datetime:2024-12-08 18:00 channel:#test
ุฃุนุฏ ุชุดุบูู ุงูุจูุช (Ctrl+C ุซู npm start)
ุชุญูู ูู Logs: "Restored schedule"
```

### ุงุฎุชุจุงุฑ 3: ุงูุชุนุฏูู
```
/schedule datetime:2024-12-08 18:00 channel:#test
/schedule datetime:2024-12-08 20:00 channel:#test
ุชุญูู ูู ุชุญุฏูุซ ุงูููุช
```

### ุงุฎุชุจุงุฑ 4: ุงูุฅูุบุงุก
```
/schedule datetime:2024-12-08 18:00 channel:#test
/cancelschedule
ุชุญูู ูู ุญุฐู schedule.json
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฌุฏููุฉ ูุง ุชูุณุชุฑุฌุน ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ `schedule.json` ูู ูุฌูุฏ ุงููุดุฑูุน
2. ุชุญูู ูู Logs: "Restored schedule" ุฃู "No saved schedule found"
3. ุชุญูู ูู ุตูุงุญูุงุช ุงููุชุงุจุฉ ูู ุงููุฌูุฏ

### ุงููุดููุฉ: ุงูููู ูุง ููุญุฐู ุจุนุฏ ุงูุฅุฑุณุงู
**ุงูุญู:**
1. ุชุญูู ูู Logs: "Deleted schedule file"
2. ุงุญุฐู ุงูููู ูุฏููุงู ุฅุฐุง ูุฒู ุงูุฃูุฑ
3. ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู ุงูููุฏ

### ุงููุดููุฉ: ุงูููุช ุงููุชุจูู ุฎุงุทุฆ
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู UTC ูู ุงูุฅุฏุฎุงู
2. ุชุญูู ูู ุชูููุช ุงูุณูุฑูุฑ (Railway)
3. ุงุณุชุฎุฏู `date` ูู terminal ููุชุญูู

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### `src/bot.js`:
- โ ุฅุถุงูุฉ `this.scheduledData` ู `this.scheduleFilePath`
- โ ุฅุถุงูุฉ `saveSchedule()`
- โ ุฅุถุงูุฉ `loadSchedule()`
- โ ุฅุถุงูุฉ `deleteSchedule()`
- โ ุชุญุฏูุซ `handleSchedule()`
- โ ุชุญุฏูุซ `handleCancelSchedule()`
- โ ุงุณุชุฏุนุงุก `loadSchedule()` ูู `onReady()`

### `.gitignore`:
- โ ุฅุถุงูุฉ `schedule.json`

---

## โ ุงูุฎูุงุตุฉ

**ุงูุขู ุงูุจูุช ูุฏุนู:**
- โ ุชุฎุฒูู ุฏุงุฆู ููุฌุฏููุฉ
- โ ุงุณุชุฑุฌุงุน ุชููุงุฆู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู
- โ ุชุญุฏูุซ ูุฅูุบุงุก ุงูุฌุฏููุฉ
- โ ุชูุธูู ุชููุงุฆู ูููููุงุช
- โ Logging ููุตู ููุชุชุจุน

**ุงูุฌุฏููุฉ ุงูุขู ููุซููุฉ ุญุชู ูุน ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช!** ๐

---

ุชุงุฑูุฎ ุงูุฅูุดุงุก: 8 ุฏูุณูุจุฑ 2025
